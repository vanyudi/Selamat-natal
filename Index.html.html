<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<title>üéÑ Surat Natal üéÑ</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Segoe UI',sans-serif;
}

body{
    height:100vh;
    overflow:hidden;
    background:#111;
}

/* Lampu Natal */
.lights{
    position:fixed;
    top:0;
    width:100%;
    display:flex;
    justify-content:space-around;
    z-index:5;
}

.light{
    width:14px;
    height:14px;
    border-radius:50%;
    animation:blink 1.5s infinite alternate;
}

.light:nth-child(odd){
    animation-delay:0.7s;
}

@keyframes blink{
    from{opacity:0.3;}
    to{opacity:1;}
}

/* Amplop */
#envelope{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:35vw;
    max-width:180px;
    min-width:120px;
    height:auto;
    cursor:pointer;
    z-index:1;
    transition:transform 0.4s;
}

#envelope:active{
    transform:translate(-50%,-50%) scale(1.1);
}

/* Teks klik */
#clickText{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    color:white;
    font-size:16px;
    font-weight:bold;
    text-shadow:0 0 6px black;
    cursor:pointer;
    z-index:2;
    animation:blinkText 1s infinite alternate;
    text-align:center;
    width:80%;
}

@keyframes blinkText{
    from{opacity:0.5;}
    to{opacity:1;}
}

/* Blur background */
.bg-blur{
    position:fixed;
    inset:0;
    backdrop-filter:blur(6px);
    background:rgba(0,0,0,0.6);
    display:none;
    z-index:10;
}

/* Popup */
.popup{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(0);
    background:rgba(255,255,255,0.95);
    padding:20px;
    width:90vw;
    max-width:360px;
    border-radius:20px;
    text-align:center;
    box-shadow:0 0 30px rgba(0,0,0,0.4);
    display:none;
    z-index:11;
    transition:transform 0.4s ease;
}

.popup h1{
    color:#c0392b;
    font-size:22px;
    margin-bottom:6px;
}

.popup h2{
    font-size:16px;
    margin-bottom:12px;
}

.popup p{
    font-size:15px;
    color:#333;
    line-height:1.6;
    white-space:pre-line;
    max-height:45vh;
    overflow-y:auto;
}

.popup button{
    margin-top:12px;
    padding:10px 18px;
    font-size:16px;
    cursor:pointer;
    border-radius:10px;
    border:none;
    background:#c0392b;
    color:white;
}

.from{
    margin-top:14px;
    font-size:13px;
    font-style:italic;
}

/* Salju */
canvas{
    position:fixed;
    inset:0;
    pointer-events:none;
}
</style>
</head>

<body>

<!-- Lampu Natal -->
<div class="lights">
    <div class="light" style="background:red"></div>
    <div class="light" style="background:yellow"></div>
    <div class="light" style="background:green"></div>
    <div class="light" style="background:blue"></div>
    <div class="light" style="background:orange"></div>
    <div class="light" style="background:purple"></div>
</div>

<!-- Amplop -->
<img id="envelope" src="https://i.postimg.cc/J0f6b8XG/envelope-closed.png" onclick="openLetter()">

<!-- Teks klik -->
<div id="clickText" onclick="openLetter()">Klik di sini buka suratnya Adinnn ‚ú®</div>

<!-- Overlay & Popup -->
<div class="bg-blur"></div>

<div class="popup">
    <h1>üéÑ Merry Christmas üéÑ</h1>
    <h2>Dear Adinda Tatipikalawan ‚ô•Ô∏è</h2>
    <p id="text"></p>
    <button id="musicBtn">‚è∏Ô∏è Pause Music</button>
    <div class="from">‚Äî From Yesa Wahyudi</div>
</div>

<!-- Musik -->
<audio id="music" playsinline loop>
    <source src="https://files.ceenaija.com/wp-content/uploads/music/2021/11/Pentatonix_-_My_Heart_With_You_-_We_Wish_You_A_Merry_Christmas_CeeNaija.com_.mp3">
</audio>

<!-- Salju -->
<canvas id="snow"></canvas>

<script>
const music = document.getElementById("music");
const musicBtn = document.getElementById("musicBtn");

musicBtn.onclick = ()=>{
    if(music.paused){
        music.play();
        musicBtn.textContent="‚è∏Ô∏è Pause Music";
    }else{
        music.pause();
        musicBtn.textContent="‚ñ∂Ô∏è Play Music";
    }
};

function openLetter(){
    document.getElementById("clickText").style.display="none";

    const envelope=document.getElementById("envelope");
    envelope.src="https://i.postimg.cc/1zFf1C7t/envelope-open.png";
    envelope.style.transform="translate(-50%,-50%) scale(0)";

    document.querySelector(".bg-blur").style.display="block";
    const popup=document.querySelector(".popup");
    popup.style.display="block";
    setTimeout(()=>{
        popup.style.transform="translate(-50%,-50%) scale(1)";
    },300);

    music.play().catch(()=>{});
    musicBtn.textContent="‚è∏Ô∏è Pause Music";

    const message=`Hai Adin üëã

Semoga Natal ini membawa banyak kebahagiaan dan momen hangat ‚ú®

üéÑ Pantun Natal üéÑ
Pergi ke taman melihat cemara,
Cemara indah dihiasi cahaya.
Selamat Natal penuh sukacita,
Semoga bahagia selalu menyertai kamu ‚ú®`;

    let i=0;
    const textEl=document.getElementById("text");
    textEl.innerHTML="";
    function type(){
        if(i<message.length){
            textEl.innerHTML+=message.charAt(i);
            i++;
            setTimeout(type,40);
        }
    }
    type();
}

// Salju
const canvas=document.getElementById("snow");
const ctx=canvas.getContext("2d");

function resize(){
    canvas.width=innerWidth;
    canvas.height=innerHeight;
}
resize();
window.onresize=resize;

let snow=[];
for(let i=0;i<200;i++){
    snow.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:Math.random()*4+1,
        s:Math.random()*1+0.7
    });
}

function drawSnow(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    ctx.beginPath();
    snow.forEach(f=>{
        ctx.moveTo(f.x,f.y);
        ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    });
    ctx.fill();

    snow.forEach(f=>{
        f.y+=f.s;
        if(f.y>canvas.height){
            f.y=0;
            f.x=Math.random()*canvas.width;
        }
    });
}
setInterval(drawSnow,25);
</script>

</body>
</html>
